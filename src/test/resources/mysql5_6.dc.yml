# R2dbc MySQL 5.7 docker compose config
#
# docker-compose -f mysql5_6.dc.yml up --build
# docker-compose -f src/test/resources/mysql5_6.dc.yml up --build
#
# Try using the Registry Mirror in a poorly networked area.

version: "3.3"

volumes:
  mysql5_6_dir:

services:
  test-mysql5_6-r2dbc:
    image: mysql:5.6
    command: [mysqld, --character-set-server=utf8mb4, --collation-server=utf8mb4_general_ci, --port=3305]
    # restart: always
    volumes:
      - mysql5_6_dir:/var/lib/mysql
    environment:
      MYSQL_DATABASE: r2dbc
      # Just a random password
      MYSQL_ROOT_PASSWORD: fTQeXC35l3Qf
    # For testing from the host:
    # mysql --host=127.0.0.1 --port=7321 --user root -p'fTQeXC35l3Qf'
    ports:
      - "7321:3305"
